!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.QRRecode=t()}(this,function(){"use strict";function e(e,t,a){if(!(e instanceof HTMLCanvasElement))return Promise.resolve();if(!(t instanceof HTMLCanvasElement))return Promise.resolve();var r=e.width,n=e.height,o=t.width,i=t.height,f=r,u=n,d=e,l=d.getContext("2d"),m=function(){l.clearRect(0,0,f,u)},s=function(e){if(m(),"smooth-fade"==g)return l.globalAlpha=1-e,l.drawImage(c,0,0,r,n,0,0,f,u),l.globalAlpha=e,l.drawImage(t,0,0,o,i,0,0,f,u),void(l.globalAlpha=1);if("firework"!=g)l.drawImage(t,0,0,o,i,0,0,f,u);else{if(-1==w){var a=function(e){for(var t=e.getContext("2d"),a=e.width,r=e.height,n=1;;){var o=t.getImageData(n,n,1,1).data,i=[];[].push.apply(i,o);var f=i[0],u=i[1],d=i[2];if(255===f&&f===u&&u===d)return n;if(++n>a)return 0;if(n>r)return 0}};w=0,w=Math.min(a(c),a(t))}if(w>0)for(var d=f/w,s=0;s<d;s++)for(var h=0;h<d;h++){var v=d-2*s,p=d-2*h;l.globalAlpha=1-e,l.drawImage(c,w*s,w*h,w,w,w*(s+v*e),w*(h+p*e),w,w),l.globalAlpha=1}}},c=document.createElement("canvas");if(c.getContext("2d").drawImage(d,0,0,f,u),!a)return m(),l.drawImage(t,0,0,o,i,0,0,f,u),Promise.resolve();var g=""+a.type,h=+a.duration||0,v=+new Date,p=v+h,w=-1;return new Promise(function(e){function t(){var a=(+new Date-v)/(p-v);a>=1?e():(s(a),requestAnimationFrame(t))}requestAnimationFrame(t)})}return e});
